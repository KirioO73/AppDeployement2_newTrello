/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds
 */

// activation plugins ide pour le projet
plugins {
    id 'eclipse'
    id 'idea'
}

// activation plugins ide pour les sous-projets
subprojects {
	apply plugin: 'eclipse-wtp'
	apply plugin: 'idea'
}

// configuration facettes eclipse pour les sous projets 
project(':EJBnewTrello'){
	eclipse.wtp.facet { 
			    facet name: 'java', version: '1.7'
	            facet name: 'jst.ejb', version: '3.2'
	            facet name: 'jpt.jpa', version: '2.1' 
	}
}

project(':JSFnewTrello'){
	eclipse.wtp.facet { 
			    facet name: 'java', version: '1.7'
	            facet name: 'jst.jsf', version: '2.2'
	            facet name: 'jst.web', version: '3.1'
	}
}

// configuration encodage pour eclipse
eclipseProject.doLast {
    File f = file('.settings/org.eclipse.core.resources.prefs')
    f.write('eclipse.preferences.version=1\n')
    f.append('encoding/<project>=UTF-8')
}
// configuration encodage pour IntelliJ
idea {
  project {
    ipr {
      withXml { xmlProvider ->
        def encoding = xmlProvider.asNode().component.find { it.@name == "Encoding" }
        encoding.appendNode("file", [url: "PROJECT", charset: "UTF-8"])
      }
    }
  }
}
